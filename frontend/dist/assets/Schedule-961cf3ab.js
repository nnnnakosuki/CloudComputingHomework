import{g as R,a as w,b as B}from"./classSchedule-bac13fb3.js";import{a as K,r as f,k as I,c as i,v as U,o as n,d as _,f as t,w as d,E as M,e as a,h as A,x as H,n as W,t as s,m}from"./index-9b5da449.js";import{_ as j}from"./_plugin-vue_export-helper-c27b6911.js";const q={class:"schedule-view"},z={class:"card-header"},F={class:"schedule-table"},G={key:0,class:"schedule-cell"},J={class:"course-name"},L={class:"course-info"},O={key:0,class:"schedule-cell"},P={class:"course-name"},Q={class:"course-info"},X={key:0,class:"schedule-cell"},Y={class:"course-name"},Z={class:"course-info"},$={key:0,class:"schedule-cell"},ee={class:"course-name"},se={class:"course-info"},ae={key:0,class:"schedule-cell"},te={class:"course-name"},le={class:"course-info"},de={key:0,class:"schedule-cell"},oe={class:"course-name"},ce={class:"course-info"},ne={key:0,class:"schedule-cell"},ue={class:"course-name"},re={class:"course-info"},ie={__name:"Schedule",setup(_e){const b=K(),h=f(!1),y=f("2024春季"),N=f([]),S=[{time:"08:00-09:40",start:"08:00:00",end:"09:40:00"},{time:"10:00-11:40",start:"10:00:00",end:"11:40:00"},{time:"14:00-15:40",start:"14:00:00",end:"15:40:00"},{time:"16:00-17:40",start:"16:00:00",end:"17:40:00"},{time:"19:00-20:40",start:"19:00:00",end:"20:40:00"}],p=async()=>{h.value=!0;try{let o;const l=b.userRole,c=b.userInfo.id;l==="STUDENT"?o=await R(c,y.value):l==="TEACHER"?o=await w(c,y.value):o=await B(y.value);const u=o.data||[];g(u)}catch{M.error("获取课表失败")}finally{h.value=!1}},g=o=>{N.value=S.map(l=>{const c={timeSlot:l.time,monday:null,tuesday:null,wednesday:null,thursday:null,friday:null,saturday:null,sunday:null};return o.forEach(u=>{if(u.startTime===l.start&&u.endTime===l.end){const v=k(u.weekDay);c[v]=u}}),c})},k=o=>["","monday","tuesday","wednesday","thursday","friday","saturday","sunday"][o]||"",x=()=>{p()};return I(()=>{p()}),(o,l)=>{const c=i("el-option"),u=i("el-select"),v=i("Refresh"),D=i("el-icon"),C=i("el-button"),r=i("el-table-column"),E=i("el-table"),T=i("el-card"),V=U("loading");return n(),_("div",q,[t(T,null,{header:d(()=>[a("div",z,[l[2]||(l[2]=a("span",null,"课表查看",-1)),a("div",null,[t(u,{modelValue:y.value,"onUpdate:modelValue":l[0]||(l[0]=e=>y.value=e),placeholder:"请选择学期",onChange:x},{default:d(()=>[t(c,{label:"2024春季",value:"2024春季"}),t(c,{label:"2023秋季",value:"2023秋季"}),t(c,{label:"2023春季",value:"2023春季"})]),_:1},8,["modelValue"]),t(C,{type:"primary",onClick:p,style:{"margin-left":"10px"}},{default:d(()=>[t(D,null,{default:d(()=>[t(v)]),_:1}),l[1]||(l[1]=A(" 刷新 ",-1))]),_:1})])])]),default:d(()=>[a("div",F,[H((n(),W(E,{data:N.value,stripe:"",border:"",style:{width:"100%"}},{default:d(()=>[t(r,{prop:"timeSlot",label:"时间",width:"120",fixed:"left"}),t(r,{prop:"monday",label:"星期一",width:"200"},{default:d(({row:e})=>[e.monday?(n(),_("div",G,[a("div",J,s(e.monday.courseName),1),a("div",L,s(e.monday.teacherName)+" | "+s(e.monday.classroom),1)])):m("",!0)]),_:1}),t(r,{prop:"tuesday",label:"星期二",width:"200"},{default:d(({row:e})=>[e.tuesday?(n(),_("div",O,[a("div",P,s(e.tuesday.courseName),1),a("div",Q,s(e.tuesday.teacherName)+" | "+s(e.tuesday.classroom),1)])):m("",!0)]),_:1}),t(r,{prop:"wednesday",label:"星期三",width:"200"},{default:d(({row:e})=>[e.wednesday?(n(),_("div",X,[a("div",Y,s(e.wednesday.courseName),1),a("div",Z,s(e.wednesday.teacherName)+" | "+s(e.wednesday.classroom),1)])):m("",!0)]),_:1}),t(r,{prop:"thursday",label:"星期四",width:"200"},{default:d(({row:e})=>[e.thursday?(n(),_("div",$,[a("div",ee,s(e.thursday.courseName),1),a("div",se,s(e.thursday.teacherName)+" | "+s(e.thursday.classroom),1)])):m("",!0)]),_:1}),t(r,{prop:"friday",label:"星期五",width:"200"},{default:d(({row:e})=>[e.friday?(n(),_("div",ae,[a("div",te,s(e.friday.courseName),1),a("div",le,s(e.friday.teacherName)+" | "+s(e.friday.classroom),1)])):m("",!0)]),_:1}),t(r,{prop:"saturday",label:"星期六",width:"200"},{default:d(({row:e})=>[e.saturday?(n(),_("div",de,[a("div",oe,s(e.saturday.courseName),1),a("div",ce,s(e.saturday.teacherName)+" | "+s(e.saturday.classroom),1)])):m("",!0)]),_:1}),t(r,{prop:"sunday",label:"星期日",width:"200"},{default:d(({row:e})=>[e.sunday?(n(),_("div",ne,[a("div",ue,s(e.sunday.courseName),1),a("div",re,s(e.sunday.teacherName)+" | "+s(e.sunday.classroom),1)])):m("",!0)]),_:1})]),_:1},8,["data"])),[[V,h.value]])])]),_:1})])}}},pe=j(ie,[["__scopeId","data-v-c5e74b70"]]);export{pe as default};
