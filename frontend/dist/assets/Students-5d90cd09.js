import{a as P,r as g,b as N,k as Y,c as o,v as A,o as m,d as z,f as e,w as l,E as b,e as v,h as i,F as H,q as J,g as V,x as Q,n as x,t as W}from"./index-9b5da449.js";import{a as X}from"./courseSchedule-2f0830e1.js";import{a as Z}from"./courseSelection-a3ee75e2.js";import{_ as ee}from"./_plugin-vue_export-helper-c27b6911.js";const te={class:"teacher-students"},le={class:"card-header"},ae={class:"pagination"},ne={__name:"Students",setup(oe){const k=P(),f=g(!1),y=g([]),S=g([]),s=N({current:1,size:10,total:0}),d=N({courseScheduleId:null,studentName:"",studentNo:""}),u=async()=>{f.value=!0;try{const n=await Z({current:s.current,size:s.size,courseScheduleId:d.courseScheduleId,status:2});y.value=n.data.records||[],s.total=n.data.total||0}catch{b.error("获取学生名单失败")}finally{f.value=!1}},I=async()=>{try{const n=k.userInfo.id,t=await X({teacherId:n});S.value=t.data.records||[]}catch{b.error("获取课程列表失败")}},c=()=>{s.current=1,u()},L=()=>{Object.assign(d,{courseScheduleId:null,studentName:"",studentNo:""}),c()},U=()=>{c()},T=n=>{b.info(`查看学生${n.studentName}的成绩`)},B=n=>{s.size=n,u()},j=n=>{s.current=n,u()},D=n=>{switch(n){case 1:return"warning";case 2:return"success";case 3:return"danger";default:return"info"}};return Y(()=>{u(),I()}),(n,t)=>{const w=o("Refresh"),h=o("el-icon"),p=o("el-button"),E=o("el-option"),F=o("el-select"),_=o("el-form-item"),C=o("el-input"),K=o("Search"),R=o("el-form"),r=o("el-table-column"),M=o("el-tag"),$=o("el-table"),q=o("el-pagination"),G=o("el-card"),O=A("loading");return m(),z("div",te,[e(G,null,{header:l(()=>[v("div",le,[t[6]||(t[6]=v("span",null,"学生名单",-1)),e(p,{onClick:u},{default:l(()=>[e(h,null,{default:l(()=>[e(w)]),_:1}),t[5]||(t[5]=i(" 刷新 ",-1))]),_:1})])]),default:l(()=>[e(R,{model:d,inline:"",class:"search-form"},{default:l(()=>[e(_,{label:"课程"},{default:l(()=>[e(F,{modelValue:d.courseScheduleId,"onUpdate:modelValue":t[0]||(t[0]=a=>d.courseScheduleId=a),placeholder:"请选择课程",onChange:U,style:{width:"300px"}},{default:l(()=>[(m(!0),z(H,null,J(S.value,a=>(m(),x(E,{key:a.id,label:a.courseName,value:a.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),e(_,{label:"学生姓名"},{default:l(()=>[e(C,{modelValue:d.studentName,"onUpdate:modelValue":t[1]||(t[1]=a=>d.studentName=a),placeholder:"请输入学生姓名",clearable:"",onKeyup:V(c,["enter"])},null,8,["modelValue"])]),_:1}),e(_,{label:"学号"},{default:l(()=>[e(C,{modelValue:d.studentNo,"onUpdate:modelValue":t[2]||(t[2]=a=>d.studentNo=a),placeholder:"请输入学号",clearable:"",onKeyup:V(c,["enter"])},null,8,["modelValue"])]),_:1}),e(_,null,{default:l(()=>[e(p,{type:"primary",onClick:c},{default:l(()=>[e(h,null,{default:l(()=>[e(K)]),_:1}),t[7]||(t[7]=i(" 搜索 ",-1))]),_:1}),e(p,{onClick:L},{default:l(()=>[e(h,null,{default:l(()=>[e(w)]),_:1}),t[8]||(t[8]=i(" 重置 ",-1))]),_:1})]),_:1})]),_:1},8,["model"]),Q((m(),x($,{data:y.value,stripe:"",style:{width:"100%"}},{default:l(()=>[e(r,{prop:"studentNo",label:"学号",width:"120"}),e(r,{prop:"studentName",label:"姓名",width:"100"}),e(r,{prop:"gender",label:"性别",width:"80"}),e(r,{prop:"major",label:"专业",width:"150"}),e(r,{prop:"className",label:"班级",width:"120"}),e(r,{prop:"enrollmentYear",label:"入学年份",width:"100"}),e(r,{prop:"courseName",label:"课程名称",width:"150"}),e(r,{prop:"selectTime",label:"选课时间",width:"160"}),e(r,{prop:"statusText",label:"状态",width:"100"},{default:l(({row:a})=>[e(M,{type:D(a.status)},{default:l(()=>[i(W(a.statusText),1)]),_:2},1032,["type"])]),_:1}),e(r,{label:"操作",width:"120",fixed:"right"},{default:l(({row:a})=>[e(p,{type:"primary",size:"small",onClick:se=>T(a)},{default:l(()=>[...t[9]||(t[9]=[i(" 查看成绩 ",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1},8,["data"])),[[O,f.value]]),v("div",ae,[e(q,{"current-page":s.current,"onUpdate:currentPage":t[3]||(t[3]=a=>s.current=a),"page-size":s.size,"onUpdate:pageSize":t[4]||(t[4]=a=>s.size=a),total:s.total,"page-sizes":[10,20,50,100],layout:"total, sizes, prev, pager, next, jumper",onSizeChange:B,onCurrentChange:j},null,8,["current-page","page-size","total"])])]),_:1})])}}},ie=ee(ne,[["__scopeId","data-v-efc256fa"]]);export{ie as default};
