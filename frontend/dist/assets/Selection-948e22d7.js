import{g as D,c as C}from"./courseSelection-a3ee75e2.js";import{r as m,a as k,k as M,c as l,v as T,o as i,d as B,f as a,w as s,E as u,e as f,h as _,x as P,n as g,t as h,m as w,p as V}from"./index-9b5da449.js";import{_ as I}from"./_plugin-vue_export-helper-c27b6911.js";const R={class:"selection-container"},G={class:"card-header"},A={__name:"Selection",setup(J){const p=m([]),c=m(!1);k();const r=async()=>{c.value=!0;try{const t=await D();p.value=t.data||[]}catch{u.error("加载选课信息失败")}finally{c.value=!1}},v=async t=>{try{await V.confirm("确定要取消选课吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}),await C(t),u.success("取消选课成功"),r()}catch(e){e!=="cancel"&&u.error("取消选课失败")}},y=t=>({PENDING:"warning",APPROVED:"success",REJECTED:"danger"})[t]||"info",E=t=>({PENDING:"待审核",APPROVED:"已通过",REJECTED:"已拒绝"})[t]||"未知";return M(()=>{r()}),(t,e)=>{const d=l("el-button"),o=l("el-table-column"),N=l("el-tag"),b=l("el-table"),x=l("el-card"),S=T("loading");return i(),B("div",R,[a(x,null,{header:s(()=>[f("div",G,[e[1]||(e[1]=f("span",null,"我的选课",-1)),a(d,{type:"primary",onClick:r},{default:s(()=>[...e[0]||(e[0]=[_("刷新",-1)])]),_:1})])]),default:s(()=>[P((i(),g(b,{data:p.value},{default:s(()=>[a(o,{prop:"courseName",label:"课程名称"}),a(o,{prop:"teacherName",label:"授课教师"}),a(o,{prop:"scheduleTime",label:"上课时间"}),a(o,{prop:"status",label:"状态"},{default:s(({row:n})=>[a(N,{type:y(n.status)},{default:s(()=>[_(h(E(n.status)),1)]),_:2},1032,["type"])]),_:1}),a(o,{label:"操作"},{default:s(({row:n})=>[n.status==="PENDING"?(i(),g(d,{key:0,type:"danger",size:"small",onClick:O=>v(n.id)},{default:s(()=>[...e[2]||(e[2]=[_(" 取消选课 ",-1)])]),_:1},8,["onClick"])):w("",!0)]),_:1})]),_:1},8,["data"])),[[S,c.value]])]),_:1})])}}},j=I(A,[["__scopeId","data-v-f821a3a1"]]);export{j as default};
